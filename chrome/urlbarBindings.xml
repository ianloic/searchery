<?xml version="1.0"?>
<bindings id="urlbarBindings" xmlns="http://www.mozilla.org/xbl">
  <binding id="urlbar" extends="chrome://browser/content/urlbarBindings.xml#urlbar">
  </binding>

  <binding id="rich-result" extends="chrome://browser/content/urlbarBindings.xml#urlbar-rich-result-popup">
    <implementation>
      <constructor><![CDATA[
        var opc = this.onPopupClick;
        this.onPopupClick = function (event) {
          alert('opc!');
          opc.apply(this, [event]);
        }

        this.__addedInstructions = false;
        this.__hbox = document.createElement('hbox');
        var label = document.createElement('label');
        label.setAttribute('value', 'press control-G for google');
        this.__hbox.appendChild(label);
        var spacer = document.createElement('spacer');
        spacer.setAttribute('flex', '1');
        this.__hbox.appendChild(spacer);

      ]]></constructor>
    </implementation>
    <handlers>
      <handler event="popupshown"><![CDATA[
        // add instructions if needed
        if (!this.__addedInstructions) {
          var richlistbox = document.getAnonymousElementByAttribute(this, 
              'anonid', 'richlistbox');
          richlistbox.parentNode.appendChild(this.__hbox);
          this.__addedInstructions = true;
        }

        var rlb = document.getAnonymousElementByAttribute(this, 'class', 'autocomplete-richlistbox');
        AwesomeSearch.log(rlb.childNodes.length);
      ]]></handler>
    </handlers>
  </binding>
</bindings>

